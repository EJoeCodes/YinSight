<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>YinSight</title>
  <link rel="stylesheet" href="/static/style.css" />
  <link rel="preload" as="image" href="/static/images/yinspun.png" />
</head>
<body id="main-body">

  <header class="nav-bar">
    <a class="link" onclick="showNews('good')">Good</a>
    <img
      id="yinYang"
      class="symbol"
      src="/static/images/yinyang.png"
      alt="Yin-Yang Symbol"
      style="transform: rotate(0deg);" />
    <a class="link" onclick="showNews('bad')">Bad</a>
  </header>

  <div id="news"></div>

  <script>
    const newsData = {
      good: [
        "Local community raises thousands for shelter animals.",
        "Scientists discover breakthrough in clean energy.",
        "Graduation rates hit all-time high nationwide."
      ],
      bad: [
        "Global warming reports show alarming trends.",
        "Economic inflation spikes in several countries.",
        "Cyberattack disrupts hospital systems across states."
      ]
    };

    let currentRotation = 0;
    let hasSwitchedImage = false;

    function showNews(type) {
      const newsDiv = document.getElementById('news');
      const body = document.getElementById('main-body');
      const yinYang = document.getElementById('yinYang');

      newsDiv.style.display = 'block';
      newsDiv.innerHTML = '';

      // ✅ Swap image BEFORE rotating to avoid flicker
      if (!hasSwitchedImage) {
        yinYang.src = "/static/images/yinspun.png";
        hasSwitchedImage = true;
      }

      // ✅ Rotate: 2 full spins + desired top color
      const offset = (type === 'good') ? 0 : 180;
      currentRotation += 720 + offset;
      yinYang.style.transform = `rotate(${currentRotation}deg)`;

      // ✅ Apply Yang theme for good
      if (type === 'good') {
        body.classList.add('yang-theme');
      } else {
        body.classList.remove('yang-theme');
      }

      // ✅ Display news
      newsData[type].forEach(item => {
        const div = document.createElement('div');
        div.className = 'news-item';
        div.textContent = item;
        newsDiv.appendChild(div);
      });
    }
  </script>

</body>
</html>